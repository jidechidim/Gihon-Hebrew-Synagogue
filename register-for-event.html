<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Event Registration - Gihon Hebrew Synagogue</title>
  <link rel="stylesheet" href="./css/styles.css">
  <style>
    /* --- Page & Layout --- */
    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      align-items: center;
      font-family: 'Source Sans 3', sans-serif;
    }

    main.page {
      display: flex;
      justify-content: center;
      flex: 1;
      width: 100%;
    }

    .form-section {
      padding: 3rem 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      width: 100%;
      max-width: 600px;
    }

    .form-section h1 {
      margin-bottom: 0.5rem;
    }

    .form-section p.subtitle {
      margin-bottom: 1.5rem;
      color: #666;
    }

    /* --- Form Styling --- */
    .gihon-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      width: 100%;
      text-align: left;
      background: var(--bg-light, #fafafa);
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .gihon-form label {
      font-weight: 600;
    }

    .gihon-form input, .gihon-form select, .gihon-form textarea {
      width: 100%;
      padding: 0.7rem;
      border: 1px solid #ccc;
      border-radius: 5px;
      font: inherit;
    }

    .gihon-form .btn {
      align-self: center;
      padding: 0.7rem 1.5rem;
    }

    .required {
      color: #c00;
    }

    /* --- Consent Checkbox Fix --- */
    .gihon-form .consent-container {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      text-align: left;
    }

    .gihon-form .consent-container input[type="checkbox"] {
      margin: 0;
      vertical-align: middle;
    }

    /* Optional: make consent text wrap nicely */
    .gihon-form .consent-container span {
      display: inline-block;
    }
  </style>
</head>
<body>

  <!-- Injected partials -->
  <div id="__header"></div>

  <main class="page">
    <section class="form-section">
      <h1>Event Registration</h1>
      <p class="subtitle">Please fill out this form to register for an event.</p>

      <form action="https://formspree.io/f/mdkwqard" method="POST" class="gihon-form" id="eventForm">
        <label>Full Name <span class="required">*</span></label>
        <input type="text" name="Full Name" required>

        <label>Email Address <span class="required">*</span></label>
        <input type="email" name="Email" required>

        <label>Phone Number</label>
        <input type="tel" name="Phone">

        <label>Event Selection <span class="required">*</span></label>
        <select name="Event Selection" required>
          <option value="">-- Select Event --</option>
          <option value="Community Outreach">Community Outreach</option>
          <option value="Youth Sabbath">Youth Sabbath</option>
          <option value="Chanukah Festival">Chanukah Festival</option>
          <option value="Summer Camp">Summer Camp</option>
          <option value="Kids Summer Camp">Kids Summer Camp</option>
          <option value="Hebrew Classes for Kids">Hebrew Classes for Kids</option>
        </select>

        <label>Special Requirements</label>
        <textarea name="Special Requirements" rows="3" placeholder="Dietary restrictions, accessibility needs, etc."></textarea>

        <label>Number of Guests</label>
        <input type="number" name="Number of Guests" min="1" value="1">

        <label>
          <input type="checkbox" name="Consent" required>
          I consent to being contacted with updates about this event <span class="required">*</span>
        </label>

        <button type="submit" class="btn btn-primary">Register</button>
      </form>
    </section>
  </main>

  <!-- Injected partial -->
  <div id="__footer"></div>

  <script type="module" src="./js/partials.js"></script>
  <script>
    // Pre-fill event ID from query string
    const params = new URLSearchParams(window.location.search);
    const eventId = params.get('eventId');
    if(eventId) document.getElementById('eventId').value = eventId;

    // Optional: after submission, thank the user and redirect
    document.querySelector('.gihon-form').addEventListener('submit', e => {
      e.preventDefault();
      fetch(e.target.action, {
        method: 'POST',
        body: new FormData(e.target),
        headers: { 'Accept': 'application/json' }
      }).then(response => {
        if(response.ok){
          alert('Thank you for registering! You will be redirected to the home page.');
          window.location.href = './index.html';
        } else {
          alert('Oops! There was a problem submitting your form.');
        }
      }).catch(() => alert('Oops! There was a problem submitting your form.'));
    });
  </script>

</body>
</html>
