<!doctype html>
<html lang="en">
<head>
  <link rel="stylesheet" href="./css/news.css">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>News and Media - Gihon Hebrew Synagogue</title>
  <link rel="icon" type="image/png" href="assets/logo.png">
  
  <!-- Fonts & CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./news.css" />
</head>

  <!-- Injected partials -->
  <div id="__header"></div>
 
  <main class="page"> 
    <!-- Title --> 
    <section class="news-head" aria-labelledby="newsTitle"> 
      <div class="container narrow center"> 
        <h1 id="newsTitle">Latest from Ghihon</h1> 
      </div> 
    </section> 
 
  <!-- News Section -->
  <main class="page">
      <!-- Container for JS-generated news cards -->
      <div id="newsList" class="news-grid"></div>
    </section>
  </main>
 
  <!-- Injected partial -->
  <div id="__footer"></div>

  <!-- Scripts -->
  <script type="module" src="./js/partials.js"></script>
  <script src="./script.js"></script>

<script>
async function loadNews() {
  try {
    const res = await fetch('./data/news.json', { cache: 'no-cache' });
    if (!res.ok) throw new Error('Failed to load news.json');
    const items = await res.json();

    const wrap = document.getElementById('newsList');
    if (!wrap) return;

    wrap.innerHTML = items
      .sort((a, b) => new Date(b.date) - new Date(a.date))
      .map(post => `
        <article class="post">
          <a class="post-media" href="news-article.html?slug=${encodeURIComponent(post.id)}">
            <img src="${post.image}" alt="${post.title}">
          </a>
          <div class="post-body">
            <h3 class="post-title">
              <a href="news-article.html?slug=${encodeURIComponent(post.id)}">${post.title}</a>
            </h3>
            <p class="post-excerpt">${post.summary || ''}</p>
            <a class="post-more" href="news-article.html?slug=${encodeURIComponent(post.id)}" class="btn read-more">Read More</a>
          </div>
        </article>
      `)
      .join('');
  } catch (e) {
    console.error('Error loading news:', e);
    document.getElementById('newsList').innerHTML =
      '<p>Unable to load news at the moment.</p>';
  }
}
loadNews();
</script>

</body>
</html>