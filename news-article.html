<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>News Article - Gihon Hebrew Synagogue</title>
  <link rel="icon" type="image/png" href="assets/logo.png">
  <link rel="stylesheet" href="./css/styles.css">
  <style>
    /* Article content styling */
    .article-container {
      max-width: 800px;
      margin: 3rem auto 5rem auto;
      padding: 0 1rem;
    }

    .article-container h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
      text-align: center;
    }

    .article-container img {
      width: 100%;
      height: auto;
      border-radius: 10px;
      margin: 1.5rem 0;
      display: block;
    }

    .article-container p {
      font-size: 1rem;
      line-height: 1.6;
      color: #333;
      margin-bottom: 1rem;
    }

    .back-btn {
      display: inline-block;
      margin-top: 2rem;
      padding: 0.5rem 1rem;
      color: #007BFF;
      text-decoration: none;
      font-weight: 600;
      transition: color 0.2s;
    }

    .back-btn:hover {
      color: #0056b3;
    }
  </style>
</head>

<body>
  <!-- Injected partials -->
  <div id="__header"></div>

  <main class="page">
    <section class="article-container" id="articleContent">
      <!-- Article content will be injected here -->
    </section>
  </main>

  <!-- Injected partials -->
  <div id="__footer"></div>

  <!-- Scripts -->
  <script type="module" src="./js/partials.js"></script>
  <script>
    async function loadArticle() {
      const params = new URLSearchParams(window.location.search);
      const slug = params.get('slug');

      try {
        const res = await fetch('./data/news.json', { cache: 'no-cache' });
        if (!res.ok) throw new Error('Failed to load news.json');

        const articles = await res.json();
        const article = articles.find(a => a.id == slug);

        const container = document.getElementById('articleContent');

        if (!article) {
          container.innerHTML = '<p>Article not found.</p>';
          return;
        }

        container.innerHTML = `
          <h1>${article.title}</h1>
          <img src="${article.image}" alt="${article.title}">
          <p>${article.summary}</p>
          ${article.content ? `<p>${article.content}</p>` : ''}
          <a href="news.html" class="back-btn">‚Üê Back to News</a>
        `;
      } catch (e) {
        console.error(e);
        document.getElementById('articleContent').innerHTML =
          '<p>Unable to load article.</p>';
      }
    }

    loadArticle();
  </script>
</body>
</html>
