<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Leadership Team - Gihon Hebrew Synagogue</title>
  <link rel="icon" type="image/png" href="/assets/logo.png">
  
  <!-- Fonts & CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/leadership.css" />
</head>
<body>
  <!-- Header (injected by partials.js) -->
  <div id="__header"></div>

  <main class="page" id="main">
    <!-- Hero section -->
    <section class="council-hero" aria-labelledby="pageTitle">
      <div class="container narrow center">
        <h1 id="pageTitle">Our Board and Executive Council</h1>
        <figure class="hero-figure">
          <img src="/assets/leadershipimage1.png" alt="Members of the board and the executive council" />
          <figcaption>Members of the board and the executive council. Left to right</figcaption>
        </figure>
      </div>
    </section>

    <!-- Members section -->
    <section class="members" aria-labelledby="membersTitle">
      <div class="container narrow center">
        <h2 id="membersTitle">Our Members</h2>
      </div>

      <div class="container">
        <ul class="members-grid" role="list" id="membersGrid">
          <!-- JS will inject members here -->
        </ul>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <div id="__footer"></div>

  <!-- Scripts -->
  <script type="module" src="./js/partials.js"></script>
  <script>
    async function loadLeadership() {
      try {
        // Fetch leadership.json
        const res = await fetch('/data/leadership.json');
        if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);

        const data = await res.json();

        // Update hero section
        const heroImg = document.querySelector('.hero-figure img');
        const heroCaption = document.querySelector('.hero-figure figcaption');
        heroImg.src = data.hero.image.replace('/public', '');
        heroImg.alt = data.hero.alt;
        heroCaption.textContent = data.hero.figcaption;

        // Populate members
        const membersGrid = document.getElementById('membersGrid');
        membersGrid.innerHTML = '';

        data.members.forEach(member => {
          const li = document.createElement('li');
          li.className = 'member';
          if (member.solo) li.classList.add('member--solo');

          li.innerHTML = `
            <figure>
              <img class="avatar" src="${member.image.replace('/public','')}" alt="${member.alt}" />
              <figcaption>
                <strong>${member.name}</strong>
                <span>${member.role}</span>
              </figcaption>
            </figure>
          `;
          membersGrid.appendChild(li);
        });

        console.log('✅ Leadership data loaded successfully');
      } catch (err) {
        console.error('❌ Failed to load leadership.json:', err);
        alert('Failed to load leadership data. Check console for details.');
      }
    }

    document.addEventListener('DOMContentLoaded', loadLeadership);
  </script>
</body>
</html>
